
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Aw snap! Ubuntu Core - No Such Thing as Two</title>
  <meta name="author" content="Nathan Wallace">

   
  <meta name="description" content="A blog about Ruby!">
  
  <meta name="keywords" content="">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://nwallace.github.io/blog/2015/01/28/aw-snap-ubuntu-core">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic|Ubuntu+Mono:400,700,400italic|Open+Sans:300italic,700italic,300,700' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Averia+Sans+Libre:300,400,700,300italic,400italic,700italic|Roboto+Condensed:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="No Such Thing as Two" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr-2.0.js"></script>
  <script src="/js/octopress.js" type="text/javascript"></script>
  <script src="/js/application.js"></script>
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-49639013-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header id="title-banner">
  <div id="banner-brand">
    <div class="container">
      <a href="/" title="No Such Thing as Two">No Such Thing as Two</a>
      <h3 class="tagline">0011110000110011</h3>
    </div>
  </div>
  <div class="navbar navbar-inverse navbar-static-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
        <div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
          <ul class="nav">
  <li >
    <a href="/" title="0011110000110011">
      <i class="icon-home social-navbar"></i>
    </a>
  </li>
  <!---->
</ul>

<ul class="nav pull-right">
  
  <li><a href="http://github.com/nwallace" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
  
  
  
  <li><a href="http://twitter.com/nosuchthingas2" title="Twitter Profile"><i class="icon-twitter-sign social-navbar"></i></a></li>
  
  
  
  <li><a href="http://linkedin.com/pub/nathan-wallace/32/40a/352" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
  
  
  
  
  <li><a href="mailto:nathan@nosuchthingastwo.com" title="Email"><i class="icon-envelope social-navbar"></i></a></li>
  
</ul>

        </div>
      </div>
    </div>
  </div>
</header>


  <div class="container" id="main">
    <div class="row-fluid">
      <div id="content">
        <div class="span8">
          <div>
<article class="hentry" role="article">
  

  <header>
    <div class="jumbotron">
      Aw Snap! Ubuntu Core
      <h5>








  


<i class="icon-calendar-empty"></i> <time datetime="2015-01-28T00:00:00-05:00" pubdate data-updated="true">January 28<span>th</span>, 2015</time></h5>
    </div>
  </header>
  <div class="row-fluid">
    <div class="span12">
      <p>Docker! DevOps! Containerization! Buzz words! Containerization is sweeping the
community like thick-rimmed glasses and JavaScript transpilers. Since I don&#39;t
want the cool kids to realize I&#39;m a hipster-imposter, I figured I&#39;d better get
ahead of this trend while it&#39;s still cool.</p>

<p>But where to start?</p>

<h2>Ubuntu Core</h2>

<p>I probably should start learning the basics of Docker first, but Ubuntu just
released a new spin they&#39;re calling Core. Ubuntu Core, like
<a href="https://coreos.com/">CoreOS</a> and <a href="http://www.projectatomic.io/">Project
Atomic</a>, is a Linux distribution optimized for
running app containers. I chose to try out Ubuntu Core because I just read
<a href="http://0pointer.net/blog/revisiting-how-we-put-together-linux-systems.html">Lennart Pottering&#39;s blog post about OS
design</a>
and heard from <del>some rando on Hacker News</del> a reputable source that
Ubuntu Core is an early take on that philosophy. It&#39;s got all kinds of
goodness, including transactional updates, systemd and container runtime
agnosticism (I have a lot of issues with Docker, and much prefer the promise of
something like <a href="https://coreos.com/blog/rocket/">Rocket</a>).</p>

<h2>Getting Down and Dirty</h2>

<p>To try it out, download the OVA image from <a href="http://www.ubuntu.com/cloud/tools/snappy#snappy-ova">this
page</a> and open it with
<a href="https://www.virtualbox.org/">VirtualBox</a> (login and password both <code>ubuntu</code>).
There&#39;s a <a href="http://developer.ubuntu.com/en/snappy/#tour">quick overview of Ubuntu
Core</a> on Ubuntu&#39;s developer site
that walks you through an introduction to <code>snappy</code>, the tool for managing your
containers.</p>

<p>The guide explains how to install app containers with Docker. There&#39;s an example
app for displaying <a href="http://xkcd.com/">xkcd</a> comics. You can install it with:</p>

<p><code>$ sudo snappy install xkcd-webserver</code></p>

<p>The part the guide left out was what the heck that command does! As described
<a href="http://developer.ubuntu.com/en/snappy/#snap-developers">here</a>, Ubuntu Core
installs app files in <code>/apps/&lt;package&gt;/&lt;version&gt;</code>, then symlinks
<code>/apps/&lt;package&gt;/current</code> to the new version (just like Capistrano).</p>

<div class="no-line-numbers">
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ls -l /apps/xkcd-webserver/current
</span><span class='line'>  =&gt; lrwxrwxrwx 1 clickpkg clickpkg 5 Jan 28 22:01 /apps/xkcd-webserver/current -&gt; 0.3.1
</span><span class='line'>$ find /apps/xkcd-webserver -type d
</span><span class='line'>  =&gt; /apps/xkcd-webserver
</span><span class='line'>     /apps/xkcd-webserver/0.3.1
</span><span class='line'>     /apps/xkcd-webserver/0.3.1/.click
</span><span class='line'>     /apps/xkcd-webserver/0.3.1/.click/triggers
</span><span class='line'>     /apps/xkcd-webserver/0.3.1/.click/updates
</span><span class='line'>     /apps/xkcd-webserver/0.3.1/.click/info
</span><span class='line'>     /apps/xkcd-webserver/0.3.1/www
</span><span class='line'>     /apps/xkcd-webserver/0.3.1/meta
</span><span class='line'>     /apps/xkcd-webserver/0.3.1/bin</span></code></pre></td></tr></table></div></figure>
</div>

<p>Ubuntu Core installs app binaries to <code>/apps/&lt;package&gt;/&lt;version&gt;/bin</code>. If we look
inside the <code>bin</code> directory for our xkcd app, we&#39;ll find the python script that
boots up the webserver:</p>

<div class="no-line-numbers">
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ less /apps/xkcd-webserver/current/bin/xkcd-webserver
</span><span class='line'>  =&gt; !#/usr/bin/python3
</span><span class='line'>     ...</span></code></pre></td></tr></table></div></figure>
</div>

<p>In fact, the OS has already started the app for us:</p>

<div class="no-line-numbers">
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ps aux | grep xkcd
</span><span class='line'>  =&gt; root ... /usr/bin/python3 /apps/xkcd-webserver/0.3.1/bin/xkcd-webserver</span></code></pre></td></tr></table></div></figure>
</div>

<p>To see the app running, set up a port forwarding rule with VirtualBox so you
can navigate to port 80 on the virtual machine. From the VirtualBox VM Manager,
click your Ubuntu Core VM on the left and choose &quot;Settings&quot;. Under &quot;Network&quot; &gt;
&quot;Port Forwarding&quot;, click the plus sign to add a new rule to forward a Host
port (I chose 8080) to port 80 on the Guest. Then navigate to localhost:8080 in
your browser to see the app in all its glory.</p>

<p>Congratulations! You&#39;re running Docker apps on Ubuntu Core! Just be careful not
to tell your boss at work, unless you&#39;re ready to become &quot;the DevOps gal/guy&quot; ;)</p>

    </div>
  </div>



  <footer>
    <hr>
    
      <div class="row-fluid">
        
          <div class="span6">
            <p class="meta">
            
            



  <a href="/blog/categories/containers/"><span class="badge">containers</span></a>

  <a href="/blog/categories/docker/"><span class="badge">docker</span></a>

  <a href="/blog/categories/linux/"><span class="badge">linux</span></a>

  <a href="/blog/categories/ubuntu/"><span class="badge">ubuntu</span></a>

  <a href="/blog/categories/ubuntu-core/"><span class="badge">ubuntu core</span></a>




            </p>
          </div>
          
            <div class="span6 social-sharing">
              <div class="sharing">
  <div class="addthis_toolbox addthis_default_style ">
  
  
  <a class="addthis_button_tweet"></a>
  
  
  <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>

            </div>
          
        
      </div>
    
    <div class="row-fluid">
      <div class="span12">
        <p class="meta">
          
            <a class="basic-alignment left" href="/blog/2014/07/10/sql-escapades-over-and-partition-by/" title="Previous Post: SQL Escapades: OVER and PARTITION BY">&laquo; SQL Escapades: OVER and PARTITION BY</a>
          
          
        </p>
      </div>
    </div>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>



        </div>
        <aside class="span4 sidebar">
          
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:nwallace.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>



          <section>
  <h3>About</h3>
  <p>I'm Nathan Wallace, and this is my blog about web development.</p>
  <p class="clearfix"><a class="pull-right" href="/about">More &rarr;</a></p>
</section>

          <section>
  <h3>Recent Posts</h3>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/01/28/aw-snap-ubuntu-core/">Aw snap! Ubuntu Core</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/10/sql-escapades-over-and-partition-by/">SQL Escapades: OVER and PARTITION BY</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/28/starcraft-ii-on-ubuntu-14-04/">Installing StarCraft II on Ubuntu 14.04</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/11/fixing-ruby-2-1-1-on-arch/">Fixing Ruby 2.1.1 on Arch</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/03/getting-started-with-ruby/">Getting Started with Ruby</a>
      </li>
    
  </ul>
</section>

        </aside>
      </div>
    </div>
    <footer class="footer-page" role="contentinfo">
      <p>
  Copyright &copy; 2015 - Nathan Wallace -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>


    </footer>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'nosuchthingastwo';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://nwallace.github.io/blog/2015/01/28/aw-snap-ubuntu-core/';
        var disqus_url = 'http://nwallace.github.io/blog/2015/01/28/aw-snap-ubuntu-core/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
